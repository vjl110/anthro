library(XML)
theurl <- "http://www.basketball-reference.com/play-index/plus/lineup_finder.cgi?request=1&player_id=&match=single&lineup_type=5-man&output=total&year_id=2014&is_playoffs=&team_id=&opp_id=&game_num_min=0&game_num_max=99&game_month=&game_location=&game_result=&c1stat=orb_pct&c1comp=ge&c1val=&c2stat=efg_pct&c2comp=ge&c2val=&c3stat=tov&c3comp=ge&c3val=&c4stat=&c4comp=ge&c4val=&order_by=mp&order_by_asc=&offset=0"
tables <- readHTMLTable(theurl)
n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
base <- tables[[which.max(n.rows)]]
i <- 0
while(length(n.rows != 1)){
i <- i + 100
theurl <- paste(c("http://www.basketball-reference.com/play-index/plus/lineup_finder.cgi?request=1&player_id=&match=single&lineup_type=5-man&output=total&year_id=2014&is_playoffs=&team_id=&opp_id=&game_num_min=0&game_num_max=99&game_month=&game_location=&game_result=&c1stat=orb_pct&c1comp=ge&c1val=&c2stat=efg_pct&c2comp=ge&c2val=&c3stat=tov&c3comp=ge&c3val=&c4stat=&c4comp=ge&c4val=&order_by=mp&order_by_asc=&offset=", 0 + i),sep="",collapse="")
tables <- readHTMLTable(theurl)
n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
base <- rbind(base, tables[[which.max(n.rows)]])
}
i
tail(base)
i <- 2400
while(length(n.rows != 1)){
i <- i + 100
theurl <- paste(c("http://www.basketball-reference.com/play-index/plus/lineup_finder.cgi?request=1&player_id=&match=single&lineup_type=5-man&output=total&year_id=2014&is_playoffs=&team_id=&opp_id=&game_num_min=0&game_num_max=99&game_month=&game_location=&game_result=&c1stat=orb_pct&c1comp=ge&c1val=&c2stat=efg_pct&c2comp=ge&c2val=&c3stat=tov&c3comp=ge&c3val=&c4stat=&c4comp=ge&c4val=&order_by=mp&order_by_asc=&offset=", 0 + i),sep="",collapse="")
tables <- readHTMLTable(theurl)
n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
base <- rbind(base, tables[[which.max(n.rows)]])
}
off <- base
nrow(off)
# DEFENSE
theurl <- "http://www.basketball-reference.com/play-index/plus/lineup_finder.cgi?request=1&player_id=&match=single&lineup_type=5-man&output=total&year_id=2014&is_playoffs=&team_id=&opp_id=&game_num_min=0&game_num_max=99&game_month=&game_location=&game_result=&c1stat=opp_orb_pct&c1comp=ge&c1val=&c2stat=opp_efg_pct&c2comp=ge&c2val=&c3stat=opp_tov&c3comp=ge&c3val=&c4stat=&c4comp=ge&c4val=&order_by=mp&order_by_asc=&offset=0"
tables <- readHTMLTable(theurl)
n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
base <- tables[[which.max(n.rows)]]
i <- 0
i <- 2600
while(length(n.rows != 1)){
i <- i + 100
theurl <- paste(c("http://www.basketball-reference.com/play-index/plus/lineup_finder.cgi?request=1&player_id=&match=single&lineup_type=5-man&output=total&year_id=2014&is_playoffs=&team_id=&opp_id=&game_num_min=0&game_num_max=99&game_month=&game_location=&game_result=&c1stat=opp_orb_pct&c1comp=ge&c1val=&c2stat=opp_efg_pct&c2comp=ge&c2val=&c3stat=opp_tov&c3comp=ge&c3val=&c4stat=&c4comp=ge&c4val=&order_by=mp&order_by_asc=&offset=", 0 + i),sep="",collapse="")
tables <- readHTMLTable(theurl)
n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
base <- rbind(base, tables[[which.max(n.rows)]])
}
nrow(main)
nrow(base)
def <- base
colnames(def)
head(def)
def <- data.frame("lnup" = base$lineup, "D.poss" = base$Opp, "D.efg" = base$eFG%, "D.tov" = base$TOV/base$Opp, "D.orb" = base$ORB%, "D.drb" = base$DRB%, "D.FTR" = base$FT/base$FGA)
def <- data.frame("lineup" = base$lineup, "D.poss" = base$Opp, "D.efg" = base$eFG%, "D.tov" = base$TOV/base$Opp, "D.orb" = base$ORB%, "D.drb" = base$DRB%, "D.FTR" = base$FT/base$FGA)
head(base$ORB%)
head(base$3PA)
head(base$DRB)
head(base$ORB.)
base$ORB.
def <- data.frame("lineup" = base$lineup, "D.poss" = base$Opp, "D.efg" = base[,16], "D.tov" = base$TOV/base$Opp, "D.orb" = base[,22], "D.drb" = base[,24], "D.FTR" = base$FT/base$FGA)
for(base in c(6, 8:31)){
base[,i] <- as.numeric(as.character(base[,i]))
}
colnames(base)
head(base)
theurl <- "http://www.basketball-reference.com/play-index/plus/lineup_finder.cgi?request=1&player_id=&match=single&lineup_type=5-man&output=total&year_id=2014&is_playoffs=&team_id=&opp_id=&game_num_min=0&game_num_max=99&game_month=&game_location=&game_result=&c1stat=opp_orb_pct&c1comp=ge&c1val=&c2stat=opp_efg_pct&c2comp=ge&c2val=&c3stat=opp_tov&c3comp=ge&c3val=&c4stat=&c4comp=ge&c4val=&order_by=mp&order_by_asc=&offset=0"
tables <- readHTMLTable(theurl)
n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
base <- tables[[which.max(n.rows)]]
i <- 0
while(length(n.rows != 1)){
i <- i + 100
theurl <- paste(c("http://www.basketball-reference.com/play-index/plus/lineup_finder.cgi?request=1&player_id=&match=single&lineup_type=5-man&output=total&year_id=2014&is_playoffs=&team_id=&opp_id=&game_num_min=0&game_num_max=99&game_month=&game_location=&game_result=&c1stat=opp_orb_pct&c1comp=ge&c1val=&c2stat=opp_efg_pct&c2comp=ge&c2val=&c3stat=opp_tov&c3comp=ge&c3val=&c4stat=&c4comp=ge&c4val=&order_by=mp&order_by_asc=&offset=", 0 + i),sep="",collapse="")
tables <- readHTMLTable(theurl)
n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
base <- rbind(base, tables[[which.max(n.rows)]])
}
for(base in c(6, 8:31)){
base[,i] <- as.numeric(as.character(base[,i]))
}
head(base)
base
i
library(XML)
theurl <- "http://www.basketball-reference.com/play-index/plus/lineup_finder.cgi?request=1&player_id=&match=single&lineup_type=5-man&output=total&year_id=2014&is_playoffs=&team_id=&opp_id=&game_num_min=0&game_num_max=99&game_month=&game_location=&game_result=&c1stat=orb_pct&c1comp=ge&c1val=&c2stat=efg_pct&c2comp=ge&c2val=&c3stat=tov&c3comp=ge&c3val=&c4stat=&c4comp=ge&c4val=&order_by=mp&order_by_asc=&offset=0"
tables <- readHTMLTable(theurl)
n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
base <- tables[[which.max(n.rows)]]
i <- 0
base
head(base)
while(length(n.rows != 1)){
i <- i + 100
theurl <- paste(c("http://www.basketball-reference.com/play-index/plus/lineup_finder.cgi?request=1&player_id=&match=single&lineup_type=5-man&output=total&year_id=2014&is_playoffs=&team_id=&opp_id=&game_num_min=0&game_num_max=99&game_month=&game_location=&game_result=&c1stat=orb_pct&c1comp=ge&c1val=&c2stat=efg_pct&c2comp=ge&c2val=&c3stat=tov&c3comp=ge&c3val=&c4stat=&c4comp=ge&c4val=&order_by=mp&order_by_asc=&offset=", 0 + i),sep="",collapse="")
tables <- readHTMLTable(theurl)
n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
base <- rbind(base, tables[[which.max(n.rows)]])
}
head(base)
nrow(base)
for(base in c(6, 8:31)){
base[,i] <- as.numeric(as.character(base[,i]))
}
nrow(base)
library(XML)
theurl <- "http://www.basketball-reference.com/play-index/plus/lineup_finder.cgi?request=1&player_id=&match=single&lineup_type=5-man&output=total&year_id=2014&is_playoffs=&team_id=&opp_id=&game_num_min=0&game_num_max=99&game_month=&game_location=&game_result=&c1stat=orb_pct&c1comp=ge&c1val=&c2stat=efg_pct&c2comp=ge&c2val=&c3stat=tov&c3comp=ge&c3val=&c4stat=&c4comp=ge&c4val=&order_by=mp&order_by_asc=&offset=0"
tables <- readHTMLTable(theurl)
n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
base <- tables[[which.max(n.rows)]]
i <- 0
while(length(n.rows != 1)){
i <- i + 100
theurl <- paste(c("http://www.basketball-reference.com/play-index/plus/lineup_finder.cgi?request=1&player_id=&match=single&lineup_type=5-man&output=total&year_id=2014&is_playoffs=&team_id=&opp_id=&game_num_min=0&game_num_max=99&game_month=&game_location=&game_result=&c1stat=orb_pct&c1comp=ge&c1val=&c2stat=efg_pct&c2comp=ge&c2val=&c3stat=tov&c3comp=ge&c3val=&c4stat=&c4comp=ge&c4val=&order_by=mp&order_by_asc=&offset=", 0 + i),sep="",collapse="")
tables <- readHTMLTable(theurl)
n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
base <- rbind(base, tables[[which.max(n.rows)]])
}
off <- base
head(off)
theurl <- "http://www.basketball-reference.com/play-index/plus/lineup_finder.cgi?request=1&player_id=&match=single&lineup_type=5-man&output=total&year_id=2014&is_playoffs=&team_id=&opp_id=&game_num_min=0&game_num_max=99&game_month=&game_location=&game_result=&c1stat=opp_orb_pct&c1comp=ge&c1val=&c2stat=opp_efg_pct&c2comp=ge&c2val=&c3stat=opp_tov&c3comp=ge&c3val=&c4stat=&c4comp=ge&c4val=&order_by=mp&order_by_asc=&offset=0"
tables <- readHTMLTable(theurl)
n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
base <- tables[[which.max(n.rows)]]
i <- 0
while(length(n.rows != 1)){
i <- i + 100
theurl <- paste(c("http://www.basketball-reference.com/play-index/plus/lineup_finder.cgi?request=1&player_id=&match=single&lineup_type=5-man&output=total&year_id=2014&is_playoffs=&team_id=&opp_id=&game_num_min=0&game_num_max=99&game_month=&game_location=&game_result=&c1stat=opp_orb_pct&c1comp=ge&c1val=&c2stat=opp_efg_pct&c2comp=ge&c2val=&c3stat=opp_tov&c3comp=ge&c3val=&c4stat=&c4comp=ge&c4val=&order_by=mp&order_by_asc=&offset=", 0 + i),sep="",collapse="")
tables <- readHTMLTable(theurl)
n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
base <- rbind(base, tables[[which.max(n.rows)]])
}
def <- base
head(def)
def2 <- def[-c(2:5)]
head(def2)
def2 <- def[-c(2:8)]
head(def2)
head(def)
def2 <- def[-c(1, 3:8)]
head(def2)
def2 <- def[-c(1, 3:9)]
head(def2)
tst <- merge(off, def, by = "Lineup")
colnames(off)
colnames(off)[3] <- "Team"
colnames(off)
tst <- merge(off, def, by = "Lineup")
head(tst)
tst <- merge(off, def2, by = "Lineup")
head(tst)
nrow(tst)
nrow(off)
nrow(def)
tst <- merge(off, def2, by = "Lineup", all.xy = T)
nrow(tst)
?merge
tst <- merge(off, def2, by = "Lineup", all.x = FALSE)
nrow(tst)
tail(tst)
hist(tst$MP)
hist(as.numeric(as.character(tst$MP)))
max(as.numeric(as.character(tst$MP)))
max(as.numeric(as.character(tst$MP)), na.rm =T)
subset(tst, as.numeric(as.character(MP)) > 1800 )
subset(tst, as.numeric(as.character(MP)) > 1700 )
subset(tst, as.numeric(as.character(MP)) > 1500 )
35124
35020
34990
35124 - 35020
35124 - 4990
35124 - 34990
setwd("~/GitHub/anthro/womenmob/data")
d <- read.csv("mobraw.csv")
inf <- read.csv("tweinfo.csv")
dd <- merge(d, inf, by = "ID", all.x = T)
head(dd)
rep <- read.csv("twerepro.csv")
rep <- read.csv("repro.csv")
dd <- merge(dd, repro, by = "ID", all.x = T)
dd <- merge(dd, rep, by = "ID", all.x = T)
head(dd)
subset(dd, male == 0)
dd<- subset(dd, male == 0)
write.csv(dd, "tst_mob.csv")
