ADV <- data.frame("Season"=NA, "Age"=NA, "Tm"=NA, "Lg"=NA, "Pos"=NA, "G"=NA, "MP"=NA, "PER"=NA,"ORB."=NA, "DRB."=NA, "TRB."=NA, "AST."=NA, "STL."=NA, "BLK."=NA,"TOV."=NA, "USG."=NA, "OWS"=NA, "DWS"=NA,"OBPM"=NA, "DBPM"=NA, "VORP"=NA)
SHT <- data.frame("Season"=NA, "Age"=NA, "Tm"=NA, "Lg"=NA, "Pos"=NA, "G"=NA, "MP"=NA, "Dist."=NA, "rim"=NA, "cls"=NA, "mid"=NA, "lng"=NA, "tre"=NA,"rim."=NA, "cls."=NA, "mid."=NA, "lng."=NA, "tre."=NA, "asd2"=NA, "dnk"=NA, "dnk.tot"=NA, "asd3"=NA, "crnr"=NA, "crnr."=NA, "hv_at"=NA, "hv_md"=NA)
PBP <- data.frame("Season"=NA, "Age"=NA, "Tm"=NA, "Lg"=NA, "Pos"=NA, "G"=NA, "MP"=NA, "PG%"=NA, "SG%"=NA, "SF%"=NA, "PF%"=NA, "C%"=NA, "On Court"=NA, "On-Off"=NA, "Off. Foul"=NA, "Bad Pass"=NA, "Lost Ball"=NA, "Other"=NA, "PGA"=NA, "And-1"=NA, "SF Drawn"=NA,  "FGA Blkd"=NA)
TOT_PO <- TOT
ADV_PO <- ADV
SHT_PO <- SHT
PBP_PO <- PBP
NCAA <- data.frame("Season"=NA, "Age"=NA, "College"=NA, "G"=NA, "MP"=NA, "FG"=NA, "FGA"=NA, "X3P"=NA, "X3PA"=NA, "FT"=NA, "FTA"=NA, "ORB"=NA, "TRB"=NA, "AST"=NA, "STL"=NA, "BLK"=NA, "TOV"=NA, "PF"=NA, "PTS"=NA)
SAL <- data.frame("Season"=NA, "Team"=NA, "Lg"=NA, "Salary"=NA)
#for(i in 1:nrow(IDs)){
for(i in 1:5){
url <- paste0("http://www.basketball-reference.com/players/", substr(IDs$bbr[i], 1, 1), "/", IDs$bbr[i], ".html")
stat <- GET(url)
stat <- readHTMLTable(rawToChar(stat$content), stringsAsFactors = F)
tot <- as.data.frame(stat$totals)[-c(9:11, 14, 17:18, 21)]
colnames(tot)[9:12] <- c("X3P", "X3PA", "X2P", "X2PA")
TOT <- rbind(TOT, tot)
adv <- as.data.frame(stat$advanced)[-c(9:11, 20, 23:25, 28)]
colnames(adv)[9:16] <- c("ORB.", "DRB.", "TRB.", "AST.", "STL.", "BLK.","TOV.", "USG.")
ADV <- rbind(ADV, adv)
if(length(stat$shooting) > 0){
sht <- as.data.frame(stat$shooting)[-c(8, 10, 16)]
colnames(sht) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "Dist.", "rim", "cls", "mid", "lng", "tre","rim.", "cls.", "mid.", "lng.", "tre.", "asd2", "dnk", "dnk.tot", "asd3", "crnr", "crnr.", "hv_at", "hv_md")
SHT <- rbind(SHT, sht)
pbp <- as.data.frame(stat$advanced_pbp)
PBP <- rbind(PBP, pbp)
}else{
}
if(length(stat$playoffs_totals) > 0){
tot_po <- as.data.frame(stat$playoffs_totals)[-c(9:11, 14, 17:18, 21, 24)]
TOT_PO <- rbind(TOT_PO, tot_po)
adv_po <- as.data.frame(stat$playoffs_advanced)[-c(9:11, 20, 23:25, 28)]
ADV_PO <- rbind(ADV_PO, adv_po)
if(length(stat$playoffs_shooting) > 0){
sht_po <- as.data.frame(stat$playoffs_shooting)[-c(8, 10, 16)]
colnames(sht_po) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "Dist.", "rim", "cls", "mid", "lng", "tre","rim.", "cls.", "mid.", "lng.", "tre.", "asd2", "dnk", "dnk.tot", "asd3", "crnr", "crnr.", "hv_at", "hv_md")
SHT_PO <- rbind(SHT_PO, sht_po)
pbp_po <- as.data.frame(stat$playoffs_advanced_pbp)
PBP_PO <- rbind(PBP_PO, pbp_po)
}else{
}
}else{
}
if(length(stat$college) > 0){
ncaa <- as.data.frame(stat$college)[1:19]
colnames(ncaa)[8:9] <- c("X3P", "X3PA")
NCAA <- rbind(NCAA, ncaa)
}else{
}
if(length(stat$salaries) > 0){
sal <- as.data.frame(stat$salaries)
SAL <- rbind(SAL, sal)
}else{
}
}
url <- paste0("http://www.basketball-reference.com/players/", substr(IDs$bbr[i], 1, 1), "/", IDs$bbr[i], ".html")
stat <- GET(url)
stat <- readHTMLTable(rawToChar(stat$content), stringsAsFactors = F)
tot <- as.data.frame(stat$totals)[-c(9:11, 14, 17:18, 21)]
colnames(tot)[9:12] <- c("X3P", "X3PA", "X2P", "X2PA")
TOT <- rbind(TOT, tot)
adv <- as.data.frame(stat$advanced)[-c(9:11, 20, 23:25, 28)]
colnames(adv)[9:16] <- c("ORB.", "DRB.", "TRB.", "AST.", "STL.", "BLK.","TOV.", "USG.")
ADV <- rbind(ADV, adv)
if(length(stat$shooting) > 0){
sht <- as.data.frame(stat$shooting)[-c(8, 10, 16)]
colnames(sht) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "Dist.", "rim", "cls", "mid", "lng", "tre","rim.", "cls.", "mid.", "lng.", "tre.", "asd2", "dnk", "dnk.tot", "asd3", "crnr", "crnr.", "hv_at", "hv_md")
SHT <- rbind(SHT, sht)
pbp <- as.data.frame(stat$advanced_pbp)
PBP <- rbind(PBP, pbp)
}else{
}
url <- paste0("http://www.basketball-reference.com/players/", substr(IDs$bbr[i], 1, 1), "/", IDs$bbr[i], ".html")
stat <- GET(url)
stat <- readHTMLTable(rawToChar(stat$content), stringsAsFactors = F)
tot <- as.data.frame(stat$totals)[-c(9:11, 14, 17:18, 21)]
colnames(tot)[9:12] <- c("X3P", "X3PA", "X2P", "X2PA")
TOT <- rbind(TOT, tot)
adv <- as.data.frame(stat$advanced)[-c(9:11, 20, 23:25, 28)]
colnames(adv)[9:16] <- c("ORB.", "DRB.", "TRB.", "AST.", "STL.", "BLK.","TOV.", "USG.")
ADV <- rbind(ADV, adv)
if(length(stat$shooting) > 0){
sht <- as.data.frame(stat$shooting)[-c(8, 10, 16)]
colnames(sht) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "Dist.", "rim", "cls", "mid", "lng", "tre","rim.", "cls.", "mid.", "lng.", "tre.", "asd2", "dnk", "dnk.tot", "asd3", "crnr", "crnr.", "hv_at", "hv_md")
SHT <- rbind(SHT, sht)
pbp <- as.data.frame(stat$advanced_pbp)
PBP <- rbind(PBP, pbp)
}else{
}
if(length(stat$playoffs_totals) > 0){
tot_po <- as.data.frame(stat$playoffs_totals)[-c(9:11, 14, 17:18, 21, 24)]
colnames(tot_po)[9:12] <- c("X3P", "X3PA", "X2P", "X2PA")
TOT_PO <- rbind(TOT_PO, tot_po)
adv_po <- as.data.frame(stat$playoffs_advanced)[-c(9:11, 20, 23:25, 28)]
colnames(adv_po)[9:16] <- c("ORB.", "DRB.", "TRB.", "AST.", "STL.", "BLK.","TOV.", "USG.")
ADV_PO <- rbind(ADV_PO, adv_po)
if(length(stat$playoffs_shooting) > 0){
sht_po <- as.data.frame(stat$playoffs_shooting)[-c(8, 10, 16)]
colnames(sht_po) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "Dist.", "rim", "cls", "mid", "lng", "tre","rim.", "cls.", "mid.", "lng.", "tre.", "asd2", "dnk", "dnk.tot", "asd3", "crnr", "crnr.", "hv_at", "hv_md")
SHT_PO <- rbind(SHT_PO, sht_po)
pbp_po <- as.data.frame(stat$playoffs_advanced_pbp)
PBP_PO <- rbind(PBP_PO, pbp_po)
}else{
}
}else{
}
colnames(SHT)
colnames(sht)
colnames(pbp)
colnames(PBP)
IDs <- data.frame("bbr"=NBA.base$bbr, "id"=NBA.base$id)
TOT <- data.frame("Season"=NA,"Age"=NA,"Tm"=NA,"Lg"=NA,"Pos"=NA, "G"=NA,"GS"=NA,"MP"=NA,"X3P"=NA, "X3PA"=NA, "X2P"=NA, "X2PA"=NA,"FT"=NA, "FTA"=NA, "ORB"=NA, "DRB"=NA, "TRB"=NA, "AST"=NA, "STL"=NA,"BLK"=NA, "TOV"=NA, "PF"=NA, "PTS"=NA)
ADV <- data.frame("Season"=NA, "Age"=NA, "Tm"=NA, "Lg"=NA, "Pos"=NA, "G"=NA, "MP"=NA, "PER"=NA,"ORB."=NA, "DRB."=NA, "TRB."=NA, "AST."=NA, "STL."=NA, "BLK."=NA,"TOV."=NA, "USG."=NA, "OWS"=NA, "DWS"=NA,"OBPM"=NA, "DBPM"=NA, "VORP"=NA)
SHT <- data.frame("Season"=NA, "Age"=NA, "Tm"=NA, "Lg"=NA, "Pos"=NA, "G"=NA, "MP"=NA, "Dist."=NA, "rim"=NA, "cls"=NA, "mid"=NA, "lng"=NA, "tre"=NA,"rim."=NA, "cls."=NA, "mid."=NA, "lng."=NA, "tre."=NA, "asd2"=NA, "dnk"=NA, "dnk.tot"=NA, "asd3"=NA, "crnr"=NA, "crnr."=NA, "hv_at"=NA, "hv_md"=NA)
PBP <- data.frame("Season"=NA, "Age"=NA, "Tm"=NA, "Lg"=NA, "Pos"=NA, "G"=NA, "MP"=NA, "PG."=NA, "SG."=NA, "SF."=NA, "PF."=NA, "C."=NA, "On"=NA, "OnOff"=NA, "OF"=NA, "BadPass"=NA, "LostBall"=NA, "Other"=NA, "PGA"=NA, "And1"=NA, "Drawn"=NA, "Blkd"=NA)
TOT_PO <- TOT
ADV_PO <- ADV
SHT_PO <- SHT
PBP_PO <- PBP
NCAA <- data.frame("Season"=NA, "Age"=NA, "College"=NA, "G"=NA, "MP"=NA, "FG"=NA, "FGA"=NA, "X3P"=NA, "X3PA"=NA, "FT"=NA, "FTA"=NA, "ORB"=NA, "TRB"=NA, "AST"=NA, "STL"=NA, "BLK"=NA, "TOV"=NA, "PF"=NA, "PTS"=NA)
SAL <- data.frame("Season"=NA, "Team"=NA, "Lg"=NA, "Salary"=NA)
#for(i in 1:nrow(IDs)){
for(i in 1:5){
url <- paste0("http://www.basketball-reference.com/players/", substr(IDs$bbr[i], 1, 1), "/", IDs$bbr[i], ".html")
stat <- GET(url)
stat <- readHTMLTable(rawToChar(stat$content), stringsAsFactors = F)
tot <- as.data.frame(stat$totals)[-c(9:11, 14, 17:18, 21)]
colnames(tot)[9:12] <- c("X3P", "X3PA", "X2P", "X2PA")
TOT <- rbind(TOT, tot)
adv <- as.data.frame(stat$advanced)[-c(9:11, 20, 23:25, 28)]
colnames(adv)[9:16] <- c("ORB.", "DRB.", "TRB.", "AST.", "STL.", "BLK.","TOV.", "USG.")
ADV <- rbind(ADV, adv)
if(length(stat$shooting) > 0){
sht <- as.data.frame(stat$shooting)[-c(8, 10, 16)]
colnames(sht) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "Dist.", "rim", "cls", "mid", "lng", "tre","rim.", "cls.", "mid.", "lng.", "tre.", "asd2", "dnk", "dnk.tot", "asd3", "crnr", "crnr.", "hv_at", "hv_md")
SHT <- rbind(SHT, sht)
pbp <- as.data.frame(stat$advanced_pbp)
colnames(pbp) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "PG.", "SG.", "SF.", "PF.", "C.", "On", "OnOff", "OF", "BadPass", "LostBall", "Other", "PGA", "And1", "Drawn", "Blkd")
PBP <- rbind(PBP, pbp)
}else{
}
if(length(stat$playoffs_totals) > 0){
tot_po <- as.data.frame(stat$playoffs_totals)[-c(9:11, 14, 17:18, 21, 24)]
colnames(tot_po)[9:12] <- c("X3P", "X3PA", "X2P", "X2PA")
TOT_PO <- rbind(TOT_PO, tot_po)
adv_po <- as.data.frame(stat$playoffs_advanced)[-c(9:11, 20, 23:25, 28)]
colnames(adv_po)[9:16] <- c("ORB.", "DRB.", "TRB.", "AST.", "STL.", "BLK.","TOV.", "USG.")
ADV_PO <- rbind(ADV_PO, adv_po)
if(length(stat$playoffs_shooting) > 0){
sht_po <- as.data.frame(stat$playoffs_shooting)[-c(8, 10, 16)]
colnames(sht_po) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "Dist.", "rim", "cls", "mid", "lng", "tre","rim.", "cls.", "mid.", "lng.", "tre.", "asd2", "dnk", "dnk.tot", "asd3", "crnr", "crnr.", "hv_at", "hv_md")
SHT_PO <- rbind(SHT_PO, sht_po)
pbp_po <- as.data.frame(stat$playoffs_advanced_pbp)
colnames(pbp_po) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "PG.", "SG.", "SF.", "PF.", "C.", "On", "OnOff", "OF", "BadPass", "LostBall", "Other", "PGA", "And1", "Drawn", "Blkd")
PBP_PO <- rbind(PBP_PO, pbp_po)
}else{
}
}else{
}
if(length(stat$college) > 0){
ncaa <- as.data.frame(stat$college)[1:19]
colnames(ncaa)[8:9] <- c("X3P", "X3PA")
NCAA <- rbind(NCAA, ncaa)
}else{
}
if(length(stat$salaries) > 0){
sal <- as.data.frame(stat$salaries)
SAL <- rbind(SAL, sal)
}else{
}
}
stat <- GET(url)
stat <- readHTMLTable(rawToChar(stat$content), stringsAsFactors = F)
tot <- as.data.frame(stat$totals)[-c(9:11, 14, 17:18, 21)]
colnames(tot)[9:12] <- c("X3P", "X3PA", "X2P", "X2PA")
TOT <- rbind(TOT, tot)
adv <- as.data.frame(stat$advanced)[-c(9:11, 20, 23:25, 28)]
colnames(adv)[9:16] <- c("ORB.", "DRB.", "TRB.", "AST.", "STL.", "BLK.","TOV.", "USG.")
ADV <- rbind(ADV, adv)
if(length(stat$shooting) > 0){
sht <- as.data.frame(stat$shooting)[-c(8, 10, 16)]
colnames(sht) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "Dist.", "rim", "cls", "mid", "lng", "tre","rim.", "cls.", "mid.", "lng.", "tre.", "asd2", "dnk", "dnk.tot", "asd3", "crnr", "crnr.", "hv_at", "hv_md")
SHT <- rbind(SHT, sht)
pbp <- as.data.frame(stat$advanced_pbp)
colnames(pbp) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "PG.", "SG.", "SF.", "PF.", "C.", "On", "OnOff", "OF", "BadPass", "LostBall", "Other", "PGA", "And1", "Drawn", "Blkd")
PBP <- rbind(PBP, pbp)
}else{
}
if(length(stat$playoffs_totals) > 0){
tot_po <- as.data.frame(stat$playoffs_totals)[-c(9:11, 14, 17:18, 21, 24)]
colnames(tot_po)[9:12] <- c("X3P", "X3PA", "X2P", "X2PA")
TOT_PO <- rbind(TOT_PO, tot_po)
adv_po <- as.data.frame(stat$playoffs_advanced)[-c(9:11, 20, 23:25, 28)]
colnames(adv_po)[9:16] <- c("ORB.", "DRB.", "TRB.", "AST.", "STL.", "BLK.","TOV.", "USG.")
ADV_PO <- rbind(ADV_PO, adv_po)
if(length(stat$playoffs_shooting) > 0){
sht_po <- as.data.frame(stat$playoffs_shooting)[-c(8, 10, 16)]
colnames(sht_po) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "Dist.", "rim", "cls", "mid", "lng", "tre","rim.", "cls.", "mid.", "lng.", "tre.", "asd2", "dnk", "dnk.tot", "asd3", "crnr", "crnr.", "hv_at", "hv_md")
SHT_PO <- rbind(SHT_PO, sht_po)
pbp_po <- as.data.frame(stat$playoffs_advanced_pbp)
colnames(pbp_po) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "PG.", "SG.", "SF.", "PF.", "C.", "On", "OnOff", "OF", "BadPass", "LostBall", "Other", "PGA", "And1", "Drawn", "Blkd")
PBP_PO <- rbind(PBP_PO, pbp_po)
}else{
}
}else{
}
colnames(pbp)
url <- paste0("http://www.basketball-reference.com/players/", substr(IDs$bbr[i], 1, 1), "/", IDs$bbr[i], ".html")
stat <- GET(url)
stat <- readHTMLTable(rawToChar(stat$content), stringsAsFactors = F)
tot <- as.data.frame(stat$totals)[-c(9:11, 14, 17:18, 21)]
colnames(tot)[9:12] <- c("X3P", "X3PA", "X2P", "X2PA")
TOT <- rbind(TOT, tot)
adv <- as.data.frame(stat$advanced)[-c(9:11, 20, 23:25, 28)]
colnames(adv)[9:16] <- c("ORB.", "DRB.", "TRB.", "AST.", "STL.", "BLK.","TOV.", "USG.")
ADV <- rbind(ADV, adv)
if(length(stat$shooting) > 0){
sht <- as.data.frame(stat$shooting)[-c(8, 10, 16)]
colnames(sht) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "Dist.", "rim", "cls", "mid", "lng", "tre","rim.", "cls.", "mid.", "lng.", "tre.", "asd2", "dnk", "dnk.tot", "asd3", "crnr", "crnr.", "hv_at", "hv_md")
SHT <- rbind(SHT, sht)
pbp <- as.data.frame(stat$advanced_pbp)
colnames(pbp) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "PG.", "SG.", "SF.", "PF.", "C.", "On", "OnOff", "OF", "BadPass", "LostBall", "Other", "PGA", "And1", "Drawn", "Blkd")
PBP <- rbind(PBP, pbp)
}else{
}
length(stat$playoffs_totals) > 0
tot_po <- as.data.frame(stat$playoffs_totals)[-c(9:11, 14, 17:18, 21, 24)]
colnames(tot_po)[9:12] <- c("X3P", "X3PA", "X2P", "X2PA")
TOT_PO <- rbind(TOT_PO, tot_po)
adv_po <- as.data.frame(stat$playoffs_advanced)[-c(9:11, 20, 23:25, 28)]
colnames(adv_po)[9:16] <- c("ORB.", "DRB.", "TRB.", "AST.", "STL.", "BLK.","TOV.", "USG.")
ADV_PO <- rbind(ADV_PO, adv_po)
colnames(tot_po)
colnames(TOT_PO)
IDs <- data.frame("bbr"=NBA.base$bbr, "id"=NBA.base$id)
TOT <- data.frame("Season"=NA,"Age"=NA,"Tm"=NA,"Lg"=NA,"Pos"=NA, "G"=NA,"GS"=NA,"MP"=NA,"X3P"=NA, "X3PA"=NA, "X2P"=NA, "X2PA"=NA,"FT"=NA, "FTA"=NA, "ORB"=NA, "DRB"=NA, "TRB"=NA, "AST"=NA, "STL"=NA,"BLK"=NA, "TOV"=NA, "PF"=NA, "PTS"=NA)
ADV <- data.frame("Season"=NA, "Age"=NA, "Tm"=NA, "Lg"=NA, "Pos"=NA, "G"=NA, "MP"=NA, "PER"=NA,"ORB."=NA, "DRB."=NA, "TRB."=NA, "AST."=NA, "STL."=NA, "BLK."=NA,"TOV."=NA, "USG."=NA, "OWS"=NA, "DWS"=NA,"OBPM"=NA, "DBPM"=NA, "VORP"=NA)
SHT <- data.frame("Season"=NA, "Age"=NA, "Tm"=NA, "Lg"=NA, "Pos"=NA, "G"=NA, "MP"=NA, "Dist."=NA, "rim"=NA, "cls"=NA, "mid"=NA, "lng"=NA, "tre"=NA,"rim."=NA, "cls."=NA, "mid."=NA, "lng."=NA, "tre."=NA, "asd2"=NA, "dnk"=NA, "dnk.tot"=NA, "asd3"=NA, "crnr"=NA, "crnr."=NA, "hv_at"=NA, "hv_md"=NA)
PBP <- data.frame("Season"=NA, "Age"=NA, "Tm"=NA, "Lg"=NA, "Pos"=NA, "G"=NA, "MP"=NA, "PG."=NA, "SG."=NA, "SF."=NA, "PF."=NA, "C."=NA, "On"=NA, "OnOff"=NA, "OF"=NA, "BadPass"=NA, "LostBall"=NA, "Other"=NA, "PGA"=NA, "And1"=NA, "Drawn"=NA, "Blkd"=NA)
TOT_PO <- TOT
ADV_PO <- ADV
SHT_PO <- SHT
PBP_PO <- PBP
NCAA <- data.frame("Season"=NA, "Age"=NA, "College"=NA, "G"=NA, "MP"=NA, "FG"=NA, "FGA"=NA, "X3P"=NA, "X3PA"=NA, "FT"=NA, "FTA"=NA, "ORB"=NA, "TRB"=NA, "AST"=NA, "STL"=NA, "BLK"=NA, "TOV"=NA, "PF"=NA, "PTS"=NA)
SAL <- data.frame("Season"=NA, "Team"=NA, "Lg"=NA, "Salary"=NA)
#for(i in 1:nrow(IDs)){
for(i in 1:5){
url <- paste0("http://www.basketball-reference.com/players/", substr(IDs$bbr[i], 1, 1), "/", IDs$bbr[i], ".html")
stat <- GET(url)
stat <- readHTMLTable(rawToChar(stat$content), stringsAsFactors = F)
tot <- as.data.frame(stat$totals)[-c(9:11, 14, 17:18, 21)]
colnames(tot)[9:12] <- c("X3P", "X3PA", "X2P", "X2PA")
TOT <- rbind(TOT, tot)
adv <- as.data.frame(stat$advanced)[-c(9:11, 20, 23:25, 28)]
colnames(adv)[9:16] <- c("ORB.", "DRB.", "TRB.", "AST.", "STL.", "BLK.","TOV.", "USG.")
ADV <- rbind(ADV, adv)
if(length(stat$shooting) > 0){
sht <- as.data.frame(stat$shooting)[-c(8, 10, 16)]
colnames(sht) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "Dist.", "rim", "cls", "mid", "lng", "tre","rim.", "cls.", "mid.", "lng.", "tre.", "asd2", "dnk", "dnk.tot", "asd3", "crnr", "crnr.", "hv_at", "hv_md")
SHT <- rbind(SHT, sht)
pbp <- as.data.frame(stat$advanced_pbp)
colnames(pbp) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "PG.", "SG.", "SF.", "PF.", "C.", "On", "OnOff", "OF", "BadPass", "LostBall", "Other", "PGA", "And1", "Drawn", "Blkd")
PBP <- rbind(PBP, pbp)
}else{
}
if(length(stat$playoffs_totals) > 0){
tot_po <- as.data.frame(stat$playoffs_totals)[-c(9:11, 14, 17:18, 21)]
colnames(tot_po)[9:12] <- c("X3P", "X3PA", "X2P", "X2PA")
TOT_PO <- rbind(TOT_PO, tot_po)
adv_po <- as.data.frame(stat$playoffs_advanced)[-c(9:11, 20, 23:25, 28)]
colnames(adv_po)[9:16] <- c("ORB.", "DRB.", "TRB.", "AST.", "STL.", "BLK.","TOV.", "USG.")
ADV_PO <- rbind(ADV_PO, adv_po)
if(length(stat$playoffs_shooting) > 0){
sht_po <- as.data.frame(stat$playoffs_shooting)[-c(8, 10, 16)]
colnames(sht_po) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "Dist.", "rim", "cls", "mid", "lng", "tre","rim.", "cls.", "mid.", "lng.", "tre.", "asd2", "dnk", "dnk.tot", "asd3", "crnr", "crnr.", "hv_at", "hv_md")
SHT_PO <- rbind(SHT_PO, sht_po)
pbp_po <- as.data.frame(stat$playoffs_advanced_pbp)
colnames(pbp_po) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "PG.", "SG.", "SF.", "PF.", "C.", "On", "OnOff", "OF", "BadPass", "LostBall", "Other", "PGA", "And1", "Drawn", "Blkd")
PBP_PO <- rbind(PBP_PO, pbp_po)
}else{
}
}else{
}
if(length(stat$college) > 0){
ncaa <- as.data.frame(stat$college)[1:19]
colnames(ncaa)[8:9] <- c("X3P", "X3PA")
NCAA <- rbind(NCAA, ncaa)
}else{
}
if(length(stat$salaries) > 0){
sal <- as.data.frame(stat$salaries)
SAL <- rbind(SAL, sal)
}else{
}
}
TOT
IDs <- data.frame("bbr"=NBA.base$bbr, "id"=NBA.base$id)
TOT <- data.frame("Season"=NA,"Age"=NA,"Tm"=NA,"Lg"=NA,"Pos"=NA, "G"=NA,"GS"=NA,"MP"=NA,"X3P"=NA, "X3PA"=NA, "X2P"=NA, "X2PA"=NA,"FT"=NA, "FTA"=NA, "ORB"=NA, "DRB"=NA, "TRB"=NA, "AST"=NA, "STL"=NA,"BLK"=NA, "TOV"=NA, "PF"=NA, "PTS"=NA, "id"=NA)
ADV <- data.frame("Season"=NA, "Age"=NA, "Tm"=NA, "Lg"=NA, "Pos"=NA, "G"=NA, "MP"=NA, "PER"=NA,"ORB."=NA, "DRB."=NA, "TRB."=NA, "AST."=NA, "STL."=NA, "BLK."=NA,"TOV."=NA, "USG."=NA, "OWS"=NA, "DWS"=NA,"OBPM"=NA, "DBPM"=NA, "VORP"=NA, "id"=NA)
SHT <- data.frame("Season"=NA, "Age"=NA, "Tm"=NA, "Lg"=NA, "Pos"=NA, "G"=NA, "MP"=NA, "Dist."=NA, "rim"=NA, "cls"=NA, "mid"=NA, "lng"=NA, "tre"=NA,"rim."=NA, "cls."=NA, "mid."=NA, "lng."=NA, "tre."=NA, "asd2"=NA, "dnk"=NA, "dnk.tot"=NA, "asd3"=NA, "crnr"=NA, "crnr."=NA, "hv_at"=NA, "hv_md"=NA, "id"=NA)
PBP <- data.frame("Season"=NA, "Age"=NA, "Tm"=NA, "Lg"=NA, "Pos"=NA, "G"=NA, "MP"=NA, "PG."=NA, "SG."=NA, "SF."=NA, "PF."=NA, "C."=NA, "On"=NA, "OnOff"=NA, "OF"=NA, "BadPass"=NA, "LostBall"=NA, "Other"=NA, "PGA"=NA, "And1"=NA, "Drawn"=NA, "Blkd"=NA, "id"=NA)
TOT_PO <- TOT
ADV_PO <- ADV
SHT_PO <- SHT
PBP_PO <- PBP
NCAA <- data.frame("Season"=NA, "Age"=NA, "College"=NA, "G"=NA, "MP"=NA, "FG"=NA, "FGA"=NA, "X3P"=NA, "X3PA"=NA, "FT"=NA, "FTA"=NA, "ORB"=NA, "TRB"=NA, "AST"=NA, "STL"=NA, "BLK"=NA, "TOV"=NA, "PF"=NA, "PTS"=NA, "id"=NA)
SAL <- data.frame("Season"=NA, "Team"=NA, "Lg"=NA, "Salary"=NA, "id"=NA)
#for(i in 1:nrow(IDs)){
for(i in 1:5){
url <- paste0("http://www.basketball-reference.com/players/", substr(IDs$bbr[i], 1, 1), "/", IDs$bbr[i], ".html")
stat <- GET(url)
stat <- readHTMLTable(rawToChar(stat$content), stringsAsFactors = F)
tot <- as.data.frame(stat$totals)[-c(9:11, 14, 17:18, 21)]
colnames(tot)[9:12] <- c("X3P", "X3PA", "X2P", "X2PA")
tot$id <- IDs$id[i]
TOT <- rbind(TOT, tot)
adv <- as.data.frame(stat$advanced)[-c(9:11, 20, 23:25, 28)]
colnames(adv)[9:16] <- c("ORB.", "DRB.", "TRB.", "AST.", "STL.", "BLK.","TOV.", "USG.")
adv$id <- IDs$id[i]
ADV <- rbind(ADV, adv)
if(length(stat$shooting) > 0){
sht <- as.data.frame(stat$shooting)[-c(8, 10, 16)]
colnames(sht) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "Dist.", "rim", "cls", "mid", "lng", "tre","rim.", "cls.", "mid.", "lng.", "tre.", "asd2", "dnk", "dnk.tot", "asd3", "crnr", "crnr.", "hv_at", "hv_md")
sht$id <- IDs$id[i]
SHT <- rbind(SHT, sht)
pbp <- as.data.frame(stat$advanced_pbp)
colnames(pbp) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "PG.", "SG.", "SF.", "PF.", "C.", "On", "OnOff", "OF", "BadPass", "LostBall", "Other", "PGA", "And1", "Drawn", "Blkd")
pbp$id <- IDs$id[i]
PBP <- rbind(PBP, pbp)
}else{
}
if(length(stat$playoffs_totals) > 0){
tot_po <- as.data.frame(stat$playoffs_totals)[-c(9:11, 14, 17:18, 21)]
colnames(tot_po)[9:12] <- c("X3P", "X3PA", "X2P", "X2PA")
tot_po$id <- IDs$id[i]
TOT_PO <- rbind(TOT_PO, tot_po)
adv_po <- as.data.frame(stat$playoffs_advanced)[-c(9:11, 20, 23:25, 28)]
colnames(adv_po)[9:16] <- c("ORB.", "DRB.", "TRB.", "AST.", "STL.", "BLK.","TOV.", "USG.")
adv_po$id <- IDs$id[i]
ADV_PO <- rbind(ADV_PO, adv_po)
if(length(stat$playoffs_shooting) > 0){
sht_po <- as.data.frame(stat$playoffs_shooting)[-c(8, 10, 16)]
colnames(sht_po) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "Dist.", "rim", "cls", "mid", "lng", "tre","rim.", "cls.", "mid.", "lng.", "tre.", "asd2", "dnk", "dnk.tot", "asd3", "crnr", "crnr.", "hv_at", "hv_md")
sht_po$id <- IDs$id[i]
SHT_PO <- rbind(SHT_PO, sht_po)
pbp_po <- as.data.frame(stat$playoffs_advanced_pbp)
colnames(pbp_po) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "PG.", "SG.", "SF.", "PF.", "C.", "On", "OnOff", "OF", "BadPass", "LostBall", "Other", "PGA", "And1", "Drawn", "Blkd")
pbp_po$id <- IDs$id[i]
PBP_PO <- rbind(PBP_PO, pbp_po)
}else{
}
}else{
}
if(length(stat$college) > 0){
ncaa <- as.data.frame(stat$college)[1:19]
colnames(ncaa)[8:9] <- c("X3P", "X3PA")
ncaa$id <- IDs$id[i]
NCAA <- rbind(NCAA, ncaa)
}else{
}
if(length(stat$salaries) > 0){
sal <- as.data.frame(stat$salaries)
sal$id <- IDs$id[i]
SAL <- rbind(SAL, sal)
}else{
}
}
head(TOT)
IDs <- data.frame("bbr"=NBA.base$bbr, "id"=NBA.base$id)
TOT <- data.frame("Season"=NA,"Age"=NA,"Tm"=NA,"Lg"=NA,"Pos"=NA, "G"=NA,"GS"=NA,"MP"=NA,"X3P"=NA, "X3PA"=NA, "X2P"=NA, "X2PA"=NA,"FT"=NA, "FTA"=NA, "ORB"=NA, "DRB"=NA, "TRB"=NA, "AST"=NA, "STL"=NA,"BLK"=NA, "TOV"=NA, "PF"=NA, "PTS"=NA, "id"=NA)
ADV <- data.frame("Season"=NA, "Age"=NA, "Tm"=NA, "Lg"=NA, "Pos"=NA, "G"=NA, "MP"=NA, "PER"=NA,"ORB."=NA, "DRB."=NA, "TRB."=NA, "AST."=NA, "STL."=NA, "BLK."=NA,"TOV."=NA, "USG."=NA, "OWS"=NA, "DWS"=NA,"OBPM"=NA, "DBPM"=NA, "VORP"=NA, "id"=NA)
SHT <- data.frame("Season"=NA, "Age"=NA, "Tm"=NA, "Lg"=NA, "Pos"=NA, "G"=NA, "MP"=NA, "Dist."=NA, "rim"=NA, "cls"=NA, "mid"=NA, "lng"=NA, "tre"=NA,"rim."=NA, "cls."=NA, "mid."=NA, "lng."=NA, "tre."=NA, "asd2"=NA, "dnk"=NA, "dnk.tot"=NA, "asd3"=NA, "crnr"=NA, "crnr."=NA, "hv_at"=NA, "hv_md"=NA, "id"=NA)
PBP <- data.frame("Season"=NA, "Age"=NA, "Tm"=NA, "Lg"=NA, "Pos"=NA, "G"=NA, "MP"=NA, "PG."=NA, "SG."=NA, "SF."=NA, "PF."=NA, "C."=NA, "On"=NA, "OnOff"=NA, "OF"=NA, "BadPass"=NA, "LostBall"=NA, "Other"=NA, "PGA"=NA, "And1"=NA, "Drawn"=NA, "Blkd"=NA, "id"=NA)
TOT_PO <- TOT
ADV_PO <- ADV
SHT_PO <- SHT
PBP_PO <- PBP
NCAA <- data.frame("Season"=NA, "Age"=NA, "College"=NA, "G"=NA, "MP"=NA, "FG"=NA, "FGA"=NA, "X3P"=NA, "X3PA"=NA, "FT"=NA, "FTA"=NA, "ORB"=NA, "TRB"=NA, "AST"=NA, "STL"=NA, "BLK"=NA, "TOV"=NA, "PF"=NA, "PTS"=NA, "id"=NA)
SAL <- data.frame("Season"=NA, "Team"=NA, "Lg"=NA, "Salary"=NA, "id"=NA)
for(i in 1:nrow(IDs)){
url <- paste0("http://www.basketball-reference.com/players/", substr(IDs$bbr[i], 1, 1), "/", IDs$bbr[i], ".html")
stat <- GET(url)
stat <- readHTMLTable(rawToChar(stat$content), stringsAsFactors = F)
tot <- as.data.frame(stat$totals)[-c(9:11, 14, 17:18, 21)]
colnames(tot)[9:12] <- c("X3P", "X3PA", "X2P", "X2PA")
tot$id <- IDs$id[i]
TOT <- rbind(TOT, tot)
adv <- as.data.frame(stat$advanced)[-c(9:11, 20, 23:25, 28)]
colnames(adv)[9:16] <- c("ORB.", "DRB.", "TRB.", "AST.", "STL.", "BLK.","TOV.", "USG.")
adv$id <- IDs$id[i]
ADV <- rbind(ADV, adv)
if(length(stat$shooting) > 0){
sht <- as.data.frame(stat$shooting)[-c(8, 10, 16)]
colnames(sht) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "Dist.", "rim", "cls", "mid", "lng", "tre","rim.", "cls.", "mid.", "lng.", "tre.", "asd2", "dnk", "dnk.tot", "asd3", "crnr", "crnr.", "hv_at", "hv_md")
sht$id <- IDs$id[i]
SHT <- rbind(SHT, sht)
pbp <- as.data.frame(stat$advanced_pbp)
colnames(pbp) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "PG.", "SG.", "SF.", "PF.", "C.", "On", "OnOff", "OF", "BadPass", "LostBall", "Other", "PGA", "And1", "Drawn", "Blkd")
pbp$id <- IDs$id[i]
PBP <- rbind(PBP, pbp)
}else{
}
if(length(stat$playoffs_totals) > 0){
tot_po <- as.data.frame(stat$playoffs_totals)[-c(9:11, 14, 17:18, 21)]
colnames(tot_po)[9:12] <- c("X3P", "X3PA", "X2P", "X2PA")
tot_po$id <- IDs$id[i]
TOT_PO <- rbind(TOT_PO, tot_po)
adv_po <- as.data.frame(stat$playoffs_advanced)[-c(9:11, 20, 23:25, 28)]
colnames(adv_po)[9:16] <- c("ORB.", "DRB.", "TRB.", "AST.", "STL.", "BLK.","TOV.", "USG.")
adv_po$id <- IDs$id[i]
ADV_PO <- rbind(ADV_PO, adv_po)
if(length(stat$playoffs_shooting) > 0){
sht_po <- as.data.frame(stat$playoffs_shooting)[-c(8, 10, 16)]
colnames(sht_po) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "Dist.", "rim", "cls", "mid", "lng", "tre","rim.", "cls.", "mid.", "lng.", "tre.", "asd2", "dnk", "dnk.tot", "asd3", "crnr", "crnr.", "hv_at", "hv_md")
sht_po$id <- IDs$id[i]
SHT_PO <- rbind(SHT_PO, sht_po)
pbp_po <- as.data.frame(stat$playoffs_advanced_pbp)
colnames(pbp_po) <- c("Season", "Age", "Tm", "Lg", "Pos", "G", "MP", "PG.", "SG.", "SF.", "PF.", "C.", "On", "OnOff", "OF", "BadPass", "LostBall", "Other", "PGA", "And1", "Drawn", "Blkd")
pbp_po$id <- IDs$id[i]
PBP_PO <- rbind(PBP_PO, pbp_po)
}else{
}
}else{
}
if(length(stat$college) > 0){
ncaa <- as.data.frame(stat$college)[1:19]
colnames(ncaa)[8:9] <- c("X3P", "X3PA")
ncaa$id <- IDs$id[i]
NCAA <- rbind(NCAA, ncaa)
}else{
}
if(length(stat$salaries) > 0){
sal <- as.data.frame(stat$salaries)
sal$id <- IDs$id[i]
SAL <- rbind(SAL, sal)
}else{
}
}
tail(TOT)
library(sqldf)
install.packages("sqldf")
install.packages("XLConnect")
library(sqldf)
db <- dbConnect(SQLite(), dbname="Test.sqlite")
sqldf("attach 'Test1.sqlite' as new")
dbSendQuery(conn = db,
"CREATE TABLE School
(SchID INTEGER,
Location TEXT,
Authority TEXT,
SchSize TEXT)")
dbSendQuery(conn = db,
"INSERT INTO School
VALUES (1, 'urban', 'state', 'medium')")
dbSendQuery(conn = db,
"INSERT INTO School
VALUES (2, 'urban', 'independent', 'large')")
dbSendQuery(conn = db,
"INSERT INTO School
VALUES (3, 'rural', 'state', 'small')")
dbListTables(db)              # The tables in the database
dbListFields(db, "School")    # The columns in a table
dbReadTable(db, "School")
dbRemoveTable(db, "School")     # Remove the School table.
dbListTables(db)              # The tables in the database
dbListFields(db, "School")    # The columns in a table
dbReadTable(db, "School")
dbWriteTable(conn = db, name = "Student", value = "TOT",
row.names = FALSE, header = TRUE)
dbWriteTable(conn = db, name = "Student", value = "TOT",
row.names = FALSE, header = TRUE)
dbWriteTable(conn = db, name = "Student", value = "student.csv",
row.names = FALSE, header = TRUE)
dbWriteTable(conn = db, name = "Class", value = "class.csv",
row.names = FALSE, header = TRUE)
dbWriteTable(conn = db, name = "School", value = "school.csv",
row.names = FALSE, header = TRUE)
dbWriteTable(conn = db, name = "Student", value = TOT,
row.names = FALSE, header = TRUE)
head(TOT)
dbWriteTable(conn = db, name = "Total", value = TOT, row.names = FALSE)
library(sqldf)
db <- dbConnect(SQLite(), dbname="NBA.sqlite")
dbWriteTable(conn = db, name = "total", value = TOT, row.names = FALSE)
dbWriteTable(conn = db, name = "advanced", value = ADV, row.names = FALSE)
dbWriteTable(conn = db, name = "shooting", value = SHT, row.names = FALSE)
dbWriteTable(conn = db, name = "pbp", value = PBP, row.names = FALSE)
dbWriteTable(conn = db, name = "total_po", value = TOT_PO, row.names = FALSE)
dbWriteTable(conn = db, name = "advanced_po", value = ADV_PO, row.names = FALSE)
dbWriteTable(conn = db, name = "shooting_po", value = SHT_PO, row.names = FALSE)
dbWriteTable(conn = db, name = "pbp_po", value = PBP_PO, row.names = FALSE)
dbListTables(db)
dbListFields(db, "pbp")
library(sqldf)
db <- dbConnect(SQLite(), dbname="NBA.sqlite")
dbWriteTable(conn = db, name = "base", value = NBA.base, row.names = FALSE)
dbWriteTable(conn = db, name = "total", value = TOT, row.names = FALSE)
dbWriteTable(conn = db, name = "advanced", value = ADV, row.names = FALSE)
dbWriteTable(conn = db, name = "shooting", value = SHT, row.names = FALSE)
dbWriteTable(conn = db, name = "pbp", value = PBP, row.names = FALSE)
dbWriteTable(conn = db, name = "total_po", value = TOT_PO, row.names = FALSE)
dbWriteTable(conn = db, name = "advanced_po", value = ADV_PO, row.names = FALSE)
dbWriteTable(conn = db, name = "shooting_po", value = SHT_PO, row.names = FALSE)
dbWriteTable(conn = db, name = "pbp_po", value = PBP_PO, row.names = FALSE)
dbListTables(db)
str(db)
str(Table)
str(Tables)
dbDisconnect(db)
db <- dbConnect(SQLite(), dbname="NBA.sqlite")
dbListTables(db)
dbDisconnect(db)
